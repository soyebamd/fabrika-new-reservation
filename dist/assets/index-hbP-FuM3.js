(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))A(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const H of u.addedNodes)H.tagName==="LINK"&&H.rel==="modulepreload"&&A(H)}).observe(document,{childList:!0,subtree:!0});function N(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function A(l){if(l.ep)return;l.ep=!0;const u=N(l);fetch(l.href,u)}})();const he=[{id:"A",table_number:"A",min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor",type:"per person"},{id:"B",table_number:"B",min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:1,table_number:100,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:2,table_number:101,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:3,table_number:102,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:4,table_number:103,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:5,table_number:104,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:6,table_number:105,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:7,table_number:106,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:8,table_number:107,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:9,table_number:108,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:10,table_number:109,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:11,table_number:110,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:12,table_number:111,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:13,table_number:112,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:14,table_number:113,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:15,table_number:114,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:16,table_number:115,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:17,table_number:116,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:18,table_number:117,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:19,table_number:118,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:20,table_number:119,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:21,table_number:120,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:22,table_number:121,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:23,table_number:122,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:24,table_number:123,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:25,table_number:124,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:26,table_number:125,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:27,table_number:126,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:28,table_number:127,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:29,table_number:128,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:30,table_number:129,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:31,table_number:130,min_seat_requirment:4,max_seat_requirment:6,price:20,desc:"",image:"",location:"Main Floor"},{id:32,table_number:131,min_seat_requirment:4,max_seat_requirment:6,price:20,desc:"",image:"",location:"Main Floor"},{id:33,table_number:132,min_seat_requirment:2,max_seat_requirment:4,price:20,desc:"",image:"",location:"Main Floor"},{id:34,table_number:133,min_seat_requirment:2,max_seat_requirment:4,price:20,desc:"",image:"",location:"Main Floor"},{id:35,table_number:500,min_seat_requirment:2,max_seat_requirment:6,price:50,desc:"",image:"",location:"Main Floor"},{id:36,table_number:501,min_seat_requirment:2,max_seat_requirment:6,price:50,desc:"",image:"",location:"Main Floor"},{id:37,table_number:502,min_seat_requirment:6,max_seat_requirment:6,price:50,desc:"",image:"",location:"Main Floor"},{id:38,table_number:503,min_seat_requirment:6,max_seat_requirment:6,price:50,desc:"",image:"",location:"Main Floor"},{id:39,table_number:504,min_seat_requirment:1,max_seat_requirment:2,price:50,desc:"",image:"",location:"Main Floor"},{id:40,table_number:505,min_seat_requirment:1,max_seat_requirment:2,price:50,desc:"",image:"",location:"Main Floor"},{id:41,table_number:506,min_seat_requirment:1,max_seat_requirment:2,price:50,desc:"",image:"",location:"Main Floor"},{id:42,table_number:200,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:43,table_number:201,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:44,table_number:202,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:45,table_number:203,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:46,table_number:204,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:47,table_number:205,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:48,table_number:206,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:49,table_number:207,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:50,table_number:208,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:51,table_number:209,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Main Floor"},{id:52,table_number:210,min_seat_requirment:2,max_seat_requirment:4,price:20,desc:"",image:"",location:"Main Floor"},{id:53,table_number:211,min_seat_requirment:6,max_seat_requirment:6,price:20,desc:"",image:"",location:"Main Floor"},{id:54,table_number:212,min_seat_requirment:6,max_seat_requirment:6,price:20,desc:"",image:"",location:"Main Floor"},{id:55,table_number:220,min_seat_requirment:2,max_seat_requirment:4,price:20,desc:"",image:"",location:"Main Floor"},{id:56,table_number:221,min_seat_requirment:6,max_seat_requirment:6,price:20,desc:"",image:"",location:"Main Floor"},{id:57,table_number:222,min_seat_requirment:6,max_seat_requirment:6,price:20,desc:"",image:"",location:"Main Floor"},{id:58,table_number:230,min_seat_requirment:4,max_seat_requirment:6,price:20,desc:"",image:"",location:"Main Floor"},{id:59,table_number:300,min_seat_requirment:2,max_seat_requirment:6,price:20,desc:"",image:"",location:"Mezzanine Floor"},{id:60,table_number:301,min_seat_requirment:2,max_seat_requirment:6,price:20,desc:"",image:"",location:"Mezzanine Floor"},{id:61,table_number:302,min_seat_requirment:2,max_seat_requirment:6,price:20,desc:"",image:"",location:"Mezzanine Floor"},{id:62,table_number:303,min_seat_requirment:2,max_seat_requirment:6,price:20,desc:"",image:"",location:"Mezzanine Floor"},{id:63,table_number:304,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Mezzanine Floor"},{id:64,table_number:305,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Mezzanine Floor"},{id:65,table_number:306,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Mezzanine Floor"},{id:66,table_number:307,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Mezzanine Floor"},{id:67,table_number:308,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Mezzanine Floor"},{id:68,table_number:309,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Mezzanine Floor"},{id:69,table_number:310,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Mezzanine Floor"},{id:70,table_number:311,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Mezzanine Floor"},{id:71,table_number:312,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Mezzanine Floor"},{id:72,table_number:313,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Mezzanine Floor"},{id:73,table_number:314,min_seat_requirment:1,max_seat_requirment:2,price:20,desc:"",image:"",location:"Mezzanine Floor"},{id:74,table_number:315,min_seat_requirment:2,max_seat_requirment:6,price:"40 Per Person",desc:"",image:"",location:"Mezzanine Floor"},{id:75,table_number:316,min_seat_requirment:2,max_seat_requirment:6,price:"40 Per Person",desc:"",image:"",location:"Mezzanine Floor"},{id:76,table_number:317,min_seat_requirment:2,max_seat_requirment:6,price:"40 Per Person",desc:"",image:"",location:"Mezzanine Floor"},{id:77,table_number:400,min_seat_requirment:2,max_seat_requirment:6,price:20,desc:"",image:"",location:"Mezzanine Floor"},{id:78,table_number:401,min_seat_requirment:2,max_seat_requirment:6,price:20,desc:"",image:"",location:"Mezzanine Floor"},{id:79,table_number:402,min_seat_requirment:2,max_seat_requirment:6,price:20,desc:"",image:"",location:"Mezzanine Floor"},{id:80,table_number:403,min_seat_requirment:2,max_seat_requirment:6,price:20,desc:"",image:"",location:"Mezzanine Floor"},{id:81,table_number:600,min_seat_requirment:6,max_seat_requirment:8,price:20,desc:"",image:"",location:"Mezzanine Floor"},{id:82,table_number:601,min_seat_requirment:6,max_seat_requirment:8,price:20,desc:"",image:"",location:"Mezzanine Floor"},{id:83,table_number:602,min_seat_requirment:6,max_seat_requirment:8,price:20,desc:"",image:"",location:"Mezzanine Floor"},{id:84,table_number:603,min_seat_requirment:6,max_seat_requirment:8,price:20,desc:"",image:"",location:"Mezzanine Floor"}],ci=[{show_name:"Bordello (Burlesque)",show_day:"Thursday",table_id:"seat_number_105_2",table_number:105,table_price:20,table_location:"Main Floor",table_booking_date:"02/27/2025",time_slot:"6:30 PM",time_Id:"time_1830"},{show_name:"Bordello (Burlesque)",show_day:"Thursday",table_id:"seat_number_101_1",table_number:101,table_price:20,table_location:"Main Floor",table_booking_date:"02/27/2025",time_slot:"6:30 PM",time_Id:"time_1830"},{show_name:"Bordello (Burlesque)",show_day:"Thursday",table_id:"seat_number_102_2",table_number:102,table_price:20,table_location:"Main Floor",table_booking_date:"02/27/2025",time_slot:"6:30 PM",time_Id:"time_1830"},{show_name:"Opus (Variety Show)",show_day:"Saturday",table_id:"seat_number_101_2",table_number:101,table_price:20,table_location:"Main Floor",table_booking_date:"03/29/2025",time_slot:"7:30 PM",time_Id:"time_1930"},{show_name:"Opus (Variety Show)",show_day:"Saturday",table_id:"seat_number_102_1",table_number:102,table_price:20,table_location:"Main Floor",table_booking_date:"03/29/2025",time_slot:"7:30 PM",time_Id:"time_1930"},{show_name:"Opus (Variety Show)",show_day:"Saturday",table_id:"seat_number_102_2",table_number:102,table_price:20,table_location:"Main Floor",table_booking_date:"03/29/2025",time_slot:"7:30 PM",time_Id:"time_1930"},,{show_name:"Opus (Variety Show)",show_day:"Friday",table_id:"seat_number_311_2",table_number:311,table_price:50,table_location:"Mezzanine Floor",table_booking_date:"03/29/2025",time_slot:"6:30 PM",time_Id:"time_1830"},{show_name:"Opus (Variety Show)",show_day:"Friday",table_id:"seat_number_309_2",table_number:309,table_price:50,table_location:"Mezzanine Floor",table_booking_date:"03/29/2025",time_slot:"6:30 PM",time_Id:"time_1830"}];document.addEventListener("DOMContentLoaded",function(){document.querySelector("#result");const P=document.querySelector(".in-one-row-scroll"),s=[0,4,5,6],N=[20,10,50,50];let A=[...N];const l=[20,10,75,75];let u=[...l],fe=[...[200,50,300,300]],ge=[...[400,50,750,750]];const qe=[...[20,10,50,50]],we=[...[300,50,650,650]],ye=[20,20,45,45],ie=[0,0,50,100];let G=[...ie];const ne=["1:00 PM to 2:00PM","7:30 PM - 8:00PM","8:00 PM - 9:00PM","7:30 PM to Close"];let U=[...ne];const oe=["1:00 PM","7:30 PM","8:00 PM","7:30 PM"];let K=[...oe];const te=document.querySelector("#featured-image");let Me=[...["https://fabrikaphilly.com/wp-content/uploads/2024/08/sunday-drag-brunch.jpg","https://fabrikaphilly.com/wp-content/uploads/2024/08/thursday-burlesque.jpeg","https://fabrikaphilly.com/wp-content/uploads/2024/07/DSC04654.jpeg","https://fabrikaphilly.com/wp-content/uploads/2024/07/DSC04654.jpeg"]];const Se=document.querySelector("#show"),re=document.querySelector("#show-name-span"),xe=document.querySelector("#show-start-span"),Fe=document.querySelector("#show-day-span"),ke=document.querySelector("#min-spend"),ze=document.querySelector("#show-date"),ve=document.querySelector("#show-hours"),Te=document.querySelector("#show-info"),Y=document.querySelector("#customer-information");Y.style.display="none";let se=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];const ae=new Set(ci.map(i=>`${i.table_id}__${i.table_location}__${i.table_booking_date}__${i.time_Id}`));console.log(ae);function me(){console.log("Scroll cotent scroll"),P&&(P.scrollLeft=(P.scrollWidth-P.clientWidth)/2)}let I=!1;function $e(i){J.style.display="block"}function Ae(i){te.innerHTML="";const t=document.createElement("img");t.src=i,t.className="feature-image img-fluid",te.appendChild(t)}const J=document.querySelector("#events"),le=document.querySelector("#main-floor"),Q=document.querySelector("#mezzanine-floor");Q.style.display="none";const Oe=document.querySelectorAll(".table-slot"),Ee=document.querySelector("#row-AB"),Ce=document.querySelector("#row-109-105"),Pe=document.querySelector("#row-104-100"),Ie=document.querySelector("#row-200-204"),Le=document.querySelector("#row-205-209"),Be=document.querySelector("#row-110-115"),Ne=document.querySelector("#row-116-119"),He=document.querySelector("#row-120-125"),We=document.querySelector("#row-126-129"),Re=document.querySelector("#row-130-131"),Ve=document.querySelector("#row-132-133"),je=document.querySelector("#row-210-212"),Ge=document.querySelector("#row-220-222"),Ue=document.querySelector("#row-230"),Ke=document.querySelector("#row-504-506"),Ye=document.querySelector("#row-500-501"),Je=document.querySelector("#row-502-503"),Qe=document.querySelector("#row-317"),Xe=document.querySelector("#row-601-603"),Ze=document.querySelector("#row-315-316"),De=document.querySelector("#row-400-403"),ei=document.querySelector("#row-300-303"),ce=document.querySelector("#row-304-314"),_e=document.querySelector("#checkout");let W=0,q,X=[];const O={},z={},Z=document.querySelector("#time-slot");let D={sundayTimeSlot:["12:00","12:15","12:30","12:45","13:00","13:15"],thursdayTimeSlot:["18:00","18:15","18:30","18:45","19:00","19:15","19:30"],fridayTimeSlot:["18:00","18:15","18:30","19:00","19:15","19:30","19:45","20:00","20:15"],saturdayTimeSlot:["18:00","18:15","18:30","19:00","19:15","19:30","19:45"],timeSlot:function(){return[this.sundayTimeSlot,this.thursdayTimeSlot,this.fridayTimeSlot,this.saturdayTimeSlot]}};Object.values(D);let c="";const ii=[{show_id:"all",show_name:"All",show_link:"#",show_description:"All Show"},{show_id:"bordello",show_name:"Bordello (Burlesque)",show_link:"#",show_description:"A night of burlesque."},{show_id:"opus",show_name:"Opus (Variety Show)",show_link:"#",show_description:"A fun variety show with performances."},{show_id:"drag_brunch",show_name:"Drag Brunch",show_link:"#",show_description:"Brunch with fabulous drag performances."}];let{timeSlot:ni}=D;const ue=ni.call(D);let E=[...ue];console.log(E+"Slot array");let v=[...ii];const de=[v[3].show_name,v[1].show_name,v[2].show_name,v[2].show_name];let T=[...de],w=new Date().getDay();const L=[{show_id:"wicked-cabaret",show_name:"A Wicked Cabaret Ticket February 8 Ticket",show_link:"#",show_description:"A night Special of burlesque.",showDates:["02/01/2025","02/08/2025","02/15/2025"],ShowStartAt:"10:30 PM",ShowHours:"10:00 PM",MinSpend:"0",seatingTime:["22:00","22:15","22:30","22:45","23:00"]},{show_id:"love-inferno-ticket",show_name:"Love, Inferno Show 1",show_link:"#",show_description:"The Season of Love is right aound the corner! What better way to spend it than under the lights at Fabrika for our special performance: Love, Inferno",showDates:["02/14/2025"],ShowStartAt:"06:30 PM",ShowHours:"Doors Open: 5:30 pm - 8:00 pm",MinSpend:"0",seatingTime:["17:30","17:45","18:00","18:15","18:30"]},{show_id:"love-inferno-ticket-2",show_name:"Love, Inferno Show 2",show_link:"#",show_description:"The Season of Love is right aound the corner! What better way to spend it than under the lights at Fabrika for our special performance: Love, Inferno",showDates:["02/14/2025"],ShowStartAt:"09:30 PM",ShowHours:"Doors Open: 8:30 pm - close",MinSpend:"0",seatingTime:["17:30","17:45","18:00","18:15","18:30"]}];v=[...v,...L],console.log(v);const R=document.querySelectorAll(".location");let y=new Date;y=$.datepicker.formatDate("mm/dd/yy",y);const d=[];J.style.display="none",R.length>0&&(R[0].checked=!0,q=R[0].value,X=he.filter(i=>i.location===q),B(w)),R.forEach(i=>{i.addEventListener("change",function(){i.checked&&(q=i.value,X=he.filter(t=>t.location===q),B(w),console.log(d)),console.log(i.value+"location"),i.value=="Mezzanine Floor"&&(le.style.display="none",Q.style.display="block"),i.value=="Main Floor"&&(le.style.display="block",Q.style.display="none")})});function be(i,t){const f=y;L.some(o=>i===o.show_id&&o.showDates.includes(f)?(console.log(`Current Show for ${f}: ${o.show_name}`),console.log(t+" Get the day index"),console.log(T[t]+" Get show index"),console.log(T[t]+" Get show index"),console.log(o.show_name+" Show Get show index"),T[t]=o.show_name,console.log(T[t]+" Updated Get show index"),!0):(o.showDates.includes(f)||(T=[...de]),!1))}function oi(i){console.log("Invalid index or DOM element not found")}function ti(){Oe.forEach(i=>{i.innerHTML=""}),ce.innerHTML=""}function ri(){Z.innerHTML=""}function si(i){c=i,console.log(c),$("#datepicker-container").datepicker("refresh")}function ai(){v.forEach(i=>{console.log("Show Name: "+i.show_name),console.log("Show Link: "+i.show_link),console.log("Show Description: "+i.show_description);const t=document.createElement("li");t.textContent=i.show_name,t.setAttribute("data_id",i.show_id),t.className="show-link",Se.appendChild(t),document.querySelector(".show-link").classList.add("active"),t.addEventListener("click",function(){I=!1,J.style.display="none",console.log(I),c=this.getAttribute("data_id"),si(c),be(c,s.indexOf(w)),document.querySelectorAll(".show-link").forEach(o=>o.classList.remove("active")),this.classList.add("active"),B(w)})})}ai();function B(i){console.log(c+"Show ID"),be(c,s.indexOf(i)),L.forEach(e=>{if(console.log(`${y} Booking date for show`),e.showDates.includes(y)&&c===e.show_id){const n=s.indexOf(i);G[n]=e.MinSpend,K[n]=e.ShowStartAt,U[n]=e.ShowHours,E[n]=e.seatingTime}["wicked-cabaret"].includes(c)&&(A[s.indexOf(i)]=40),["love-inferno-ticket","love-inferno-ticket-2"].includes(c)&&(A[s.indexOf(i)]=85,u[s.indexOf(i)]=130),["all","bordello","opusShow","drag_brunch"].includes(c)&&(G=[...ie],K=[...oe],U=[...ne],E=[...ue],A=[...N],u=[...l])}),console.log("Display by Default"),console.log(y+"Current Date"),console.log(i+"Current DAY"),Te.style.display=I?"block":"none",re.textContent="",s.forEach((e,n)=>{e==i&&(re.textContent=T[n],oi(T[n]))});const t=se[i];Fe.textContent=t,xe.textContent=K[s.indexOf(i)],ke.textContent=`$${G[s.indexOf(i)]}`,ze.textContent=y,ve.textContent=U[s.indexOf(i)];let f=Me[s.indexOf(i)];f&&Ae(f),ri();function o(e){let[n,M]=e.split(":").map(Number),g=n>=12?"PM":"AM";return n=n%12||12,`${n}:${M<10?"0":""}${M} ${g}`}function m(e){e===0?e=E[0]:e===4?e=E[1]:e===5?e=E[2]:e===6&&(e=E[3]),e.forEach((n,M)=>{const g=document.createElement("label"),b=document.createElement("li");b.setAttribute("name",o(n)),b.value=o(n),b.textContent=o(n);const p="time_"+n.replace(/[:\s]/g,""),h=document.createElement("input");h.setAttribute("type","radio"),h.className="show-times",h.setAttribute("name","selected_time"),h.setAttribute("id",p),h.value=o(n);const C=`${p}_${M}_${q.replace(/ /g,"")}`;z[q]&&z[q][C]===M?h.checked=!0:h.checked=!1,h.addEventListener("change",function(){if(document.querySelectorAll(".form-check-input").forEach(S=>{S.checked=!1}),$e(),this.checked){console.log(d),d.forEach(S=>{console.log("Time slot value:",h.value),h.value===S.time_slot&&document.querySelectorAll(".form-check-input").forEach(r=>{r.id===S.table_id&&(r.checked=!0)})}),z[q]||(z[q]={});for(const S in z[q])z[q].hasOwnProperty(S)&&(z[q][S]=null);z[q][C]=M,d.time_slot=this.value}console.log(d)}),Z.appendChild(g),g.appendChild(h),g.appendChild(b)})}(i===0||i>=4)&&m(i),W=0,ti(),X.forEach(e=>{e.table_number>=500&&e.table_number<=506||e.table_number>=315&&e.table_number<=317?e.type="per couch":e.type="per person",e.tier=1;let n="#cb82e6";const M=i===5||i===6;e.price=A[s.indexOf(i)],M&&(console.log(e.table_number),n="#ff0000",(e.table_number>=100&&e.table_number<=104||e.table_number>=110&&e.table_number<=115||e.table_number>=120&&e.table_number<=125||e.table_number>=200&&e.table_number<=204||e.table_number>=210&&e.table_number<=212||e.table_number>=220&&e.table_number<=222)&&(n="#cb82e6",e.price=u[s.indexOf(i)])),e.table_number>=504&&e.table_number<=506&&(n="#5271ff",e.price=fe[s.indexOf(i)]),e.table_number>=500&&e.table_number<=503&&(n="#57c06b",e.price=ge[s.indexOf(i)]),(e.table_number>=304&&e.table_number<=314||e.table_number>=315&&e.table_number<=317||e.table_number>=601&&e.table_number<=603||e.table_number>=300&&e.table_number<=303||e.table_number>=400&&e.table_number<=403)&&(e.price=qe[s.indexOf(i)]),e.table_number>=315&&e.table_number<=317&&(e.price=we[s.indexOf(i)],n="#57c06b",M&&(n="#ffde59")),M&&(e.table_number>=601&&e.table_number<=603||e.table_number>=400&&e.table_number<=403)&&(e.price=ye[s.indexOf(i)],n="#eda140"),(e.table_number=="A"||e.table_number=="B")&&a(e,Ee,n,i),e.table_number>=105&&e.table_number<=109&&a(e,Ce,n,i),e.table_number>=100&&e.table_number<=104&&a(e,Pe,n,i),e.table_number>=200&&e.table_number<=204&&a(e,Ie,n,i),e.table_number>=205&&e.table_number<=209&&a(e,Le,n,i),e.table_number>=110&&e.table_number<=115&&a(e,Be,n,i),e.table_number>=116&&e.table_number<=119&&a(e,Ne,n,i),e.table_number>=120&&e.table_number<=125&&a(e,He,n,i),e.table_number>=126&&e.table_number<=129&&a(e,We,n,i),e.table_number>=130&&e.table_number<=131&&a(e,Re,n,i),e.table_number>=132&&e.table_number<=133&&a(e,Ve,n,i),e.table_number>=210&&e.table_number<=212&&a(e,je,n,i),e.table_number>=220&&e.table_number<=222&&a(e,Ge,n,i),e.table_number==230&&a(e,Ue,n,i),e.table_number>=504&&e.table_number<=506&&a(e,Ke,n,i),e.table_number>=500&&e.table_number<=501&&a(e,Ye,n,i),e.table_number>=502&&e.table_number<=503&&a(e,Je,n,i),e.table_number==317&&a(e,Qe,n,i),e.table_number>=601&&e.table_number<=603&&a(e,Xe,n,i),e.table_number>=315&&e.table_number<=316&&a(e,Ze,n,i),e.table_number>=300&&e.table_number<=303&&a(e,ei,n,i),e.table_number>=400&&e.table_number<=403&&a(e,De,n,i),e.table_number>=304&&e.table_number<=314&&a(e,ce,n,i)})}function a(i,t,f,o){if(i.price){if(o>=1&&o<=3)return;const n=document.createElement("div");n.classList.add("table-reserve"),n.innerHTML=`<div class="input-container"><div class="card text-dark fw-bold text-center" style="background-color:${f}">$${i.price}
  <small style="font-size:10px;">${i.table_number}</small><small  style="font-size:10px;">${i.type}</small></div>
  </div>`,t.appendChild(n);const M=i.max_seat_requirment;for(let g=1;g<=M;g++){let C=function(r){i.time_Id=r.id,console.log(r.id+" Data time id"),ee(),me()},ee=function(){const r=`${p}__${i.location}__${y}__${i.time_Id}`,x=document.getElementById(p);ae.has(r)?(console.log(r+"trace booked table"),x.style.border="Solid 4px red",x.checked=!0,x.setAttribute("disabled",!0)):(x.style.border="0",x.checked=!1,x.removeAttribute("disabled"))};var m=C,e=ee;const b=document.createElement("input");b.setAttribute("type","checkbox"),b.setAttribute("id",`seat_number_${i.table_number}_${g}`),Z.appendChild(b);const p=`seat_number_${i.table_number}_${g}`,h=document.querySelectorAll(".show-times");h.forEach(r=>{r.checked&&(console.log(r.id+" Time slot checked get id"),C(r)),r.addEventListener("change",function(){h.forEach(x=>{x.checked&&C(x)})})});const S=document.createElement("label");S.setAttribute("for",p),O[p]&&O[p].includes(g)&&(b.checked=!0),b.setAttribute("name","selected_table"),b.setAttribute("class","form-check-input"),b.addEventListener("change",function(){let r,x;if(h.forEach(F=>{F.checked&&(console.log("slot are checked"),r=F.value,x=F.id)}),this.checked){console.log("checkbox checked"),O[p]||(O[p]=[]),O[p].push(g),W+=i.price,console.log(o+"current selected date");let F,k;s.includes(o)&&(F=s.indexOf(o),k=se[o],console.log(F+"current Day")),d.push({show_name:T[F],show_day:k,table_id:p,table_number:i.table_number,table_price:i.price,table_location:i.location,table_booking_date:y,time_slot:r,time_Id:x}),pe(this)}else{const F=O[p].indexOf(g);F>-1&&(O[p].splice(F,1),W-=i.price),W-=i.price;const k=d.findIndex(_=>_.table_id===p&&_.table_booking_date===y);k!==-1&&(d.splice(k,1),console.log("Removed Reservation:",d),pe(),Y.style.display=k==0?"none":"block")}function pe(F){_e.innerHTML="";const k=new Map;d.forEach((_,j)=>{if(_.time_slot===void 0){alert("Please select time slot first"),F.checked=!1,d.splice(j,1);return}const li=`${_.table_id}_${_.time_slot}`;k.set(li,{data:_,index:j})}),d.length=0,k.forEach(({data:_,index:j})=>{d.push(_),Y.style.display="block",_e.innerHTML+=`
      <div class="reservation-item">
        <p>#${j+1}</p>
        <p><strong>Show Name</strong>: ${_.show_name}</p>
        <p><strong>Show Day</strong>: ${_.show_day}</p>
        <p><strong>Date</strong>: ${_.table_booking_date}</p>
        <p><strong>Seating Time</strong>: ${_.time_slot}</p>
        <p><strong>${_.table_location}</strong>: $${_.table_price}</p>
        <p>For dev use only:</p>
        <p><strong>Table</strong>: ${_.table_id}</p>
      </div>
    `})}});const V=t.querySelectorAll(".input-container");V.forEach(r=>{r.appendChild(b),r.appendChild(S)}),g%2===0?V.forEach(r=>{r.parentNode.insertBefore(b,r),r.parentNode.insertBefore(S,r)}):V.forEach(r=>{r.parentNode.insertBefore(b,r.nextSibling),r.parentNode.insertBefore(S,r.nextSibling)})}}}function mi(i){console.log(i+" RESET Booking DATE"),document.querySelectorAll(".form-check-input").forEach(o=>{o.checked=!1}),d.forEach(o=>{if(o.table_booking_date.includes(i)){const m=document.querySelector(`#${o.table_id}`);m&&(m.checked=!0,console.log(`Checkbox ${m.id} checked`))}}),document.querySelectorAll(".show-times").forEach(o=>{o.checked=!1}),d.forEach(o=>{if(o.table_booking_date.includes(i)){const m=document.querySelector(`#${o.time_Id}`);m&&(m.checked=!0,console.log(`Checkbox ${m.id} checked`))}})}w==s[w]&&B(s[w]),$(function(){const i=new Date;$("#datepicker-container").datepicker({minDate:i,beforeShowDay:function(t){var f=$.datepicker.formatDate("mm/dd/yy",t);let o=L.find(e=>e.show_id===c);if(o)return o.showDates.includes(f)?[!0]:[!1];if(c==="bordello")return t.getDay()===4?(w=4,[!0]):[!1];if(c==="opus"||c==="wicked-cabaret")return w=5,t.getDay()===5||t.getDay()===6?[!0]:[!1];if(c==="drag_brunch")return w=0,t.getDay()===0?[!0]:[!1];var m=t.getDay();return m==1||m==2||m==3?[!1]:[!0]},beforeShow:function(t,f){let o=L.find(m=>m.show_id===c);if(o&&o.showDates.length>0){let m=o.showDates[0];$(this).datepicker("setDate",m),$(this).datepicker("option","defaultDate",m)}},onSelect:function(t,f){const o=new Date(t);y=$.datepicker.formatDate("mm/dd/yy",o);const m=o.getDay();o.getDate(),o.toLocaleString("default",{weekday:"long"}),w=m,I=!0,console.log(I+"Show info"),B(w),mi(y),me()}})})});
